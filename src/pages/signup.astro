---
import Base from "../layouts/Base.astro"; // Göreli yol
import SigninSlider from "../layouts/function-components/SigninSlider.jsx"; // Göreli yol
---

<Base>
  <section>
    <div class="container max-w-full">
      <div class="row">
        <div class="min-h-[980px] bg-white py-10 lg:col-6 lg:py-[114px]">
          <div class="mx-auto w-full max-w-[480px]">
            <img class="bb-8" src="/favicon.svg" alt="" />
            <h1 class="mb-4">Sign Up</h1>
            <p>Donec sollicitudin molestie malesda sollitudin</p>
            <div class="signin-options mt-10">
              <a class="btn btn-outline-white block w-full text-dark" href="#">Sign Up With Google</a>
            </div>
            <div class="relative my-8 text-center after:absolute after:left-0 after:top-1/2 after:z-[0] after:w-full after:border-b after:border-border after:content-['']">
              <span class="relative z-[1] inline-block bg-white px-2">Or Sign Up With Email</span>
            </div>
            <!-- Appwrite Form -->
            <form id="signupForm">
              <div class="form-group">
                <label for="name" class="form-label">Full Name</label>
                <input type="text" id="name" class="form-control" placeholder="Your Full Name" required />
              </div>
              <div class="form-group mt-4">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" id="email" class="form-control" placeholder="Your Email Address" required />
              </div>
              <div class="form-group mt-4">
                <label for="password" class="form-label">Password</label>
                <input type="password" id="password" class="form-control" placeholder="Your Password" required />
              </div>
              <button class="btn btn-primary mt-10 block w-full" type="submit">Kayıt Ol</button>
            </form>
            <script type="module">
              import { signUp } from "/src/services/auth.js";
            
              document.getElementById('signupForm').addEventListener('submit', async (e) => {
                e.preventDefault();
            
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
            
                try {
                  const { user, session } = await signUp(email, password, name);
                  window.location.href = '/dashboard';
                } catch (error) {
                  alert('Kayıt başarısız: ' + error.message);
                }
              });
            </script>
            
            
            <p class="mt-6 text-center">
              Already have an account? <a class="text-dark" href="/signin">Sign in</a>.
            </p>
          </div>
        </div>
        <SigninSlider
          client:load
          title="Turn your All ideas into<br /> your reality"
        />
      </div>
    </div>
  </section>
</Base>
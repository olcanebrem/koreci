---
import { getAllPosts } from "@/lib/sanity";
import BlogList from "@/components/BlogList.astro";
import Base from "@/layouts/Base.astro";

const pageSize = 6;
const page = 1;

const allPosts = await getAllPosts();
const paginatedPosts = allPosts.slice((page - 1) * pageSize, page * pageSize);
const totalPages = Math.ceil(allPosts.length / pageSize);
---

<Base title="Blog - KoreciDev">
  <section class="section">
    <div class="container">
      <h1 class="h2 mb-8 text-center">Blog</h1>
      <BlogList posts={paginatedPosts} currentPage={page} totalPages={totalPages} />
    </div>
  </section>
</Base>

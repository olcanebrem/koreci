---
const apiKey = import.meta.env.PUBLIC_GOOGLE_MAPS_API_KEY;
if (!apiKey) {
  console.error("Google Maps API anahtarı bulunamadı. Lütfen .env dosyasında PUBLIC_GOOGLE_MAPS_API_KEY tanımlayın.");
}
---

<div id="map" class="map-container"></div>

<script define:vars={{ apiKey }}>
  // API anahtarını kontrol et
  if (!apiKey) {
    console.error("API anahtarı istemci tarafında undefined. .env dosyası doğru mu?");
    return;
  }

  // Google Maps scriptini dinamik olarak ekle
  const script = document.createElement('script');
  script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap`;
  script.async = true;
  script.defer = true;
  document.head.appendChild(script);

  // Harita başlatma fonksiyonu
  window.initMap = function () {
    const map = new google.maps.Map(document.getElementById('map'), {
      center: { lat: 37.7749, lng: -122.4194 }, // Örnek koordinat
      zoom: 12,
      styles: [
        { featureType: "water", elementType: "geometry", stylers: [{ color: "#e9e9e9" }] },
        { featureType: "landscape", elementType: "geometry", stylers: [{ color: "#f5f5f5" }] },
        { featureType: "road", elementType: "geometry", stylers: [{ color: "#ffffff" }] },
      ],
    });
  };
</script>

<style>
  .map-container {
    width: 100%;
    height: 400px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
</style>
---
const apiKey = import.meta.env.PUBLIC_GOOGLE_MAPS_API_KEY;
if (!apiKey) {
  console.error("Google Maps API anahtarı bulunamadı. Üretim ortamında ortam değişkenini kontrol edin.");
}

const location = { lat: 40.98099136352539, lng: 28.87335968017578 }; // İstanbul koordinatları
const mapId = "my-map-id"; // Google Cloud Console'dan aldığın Map ID
const markerIconUrl = "/images/users/user-9.png"; // Kendi logo URL'ni buraya ekle
---

<div id="map" class="map-container"></div>

<script define:vars={{ apiKey, location, mapId, markerIconUrl }}>
  // Google Maps scriptini dinamik olarak ekle
  const script = document.createElement('script');
  script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap&libraries=maps,marker&v=beta`;
  script.async = true;
  script.defer = true;
  document.head.appendChild(script);

  // initMap fonksiyonunu tanımla
  window.initMap = function () {
    const map = new google.maps.Map(document.getElementById('map'), {
      center: location,
      zoom: 17,
      mapId: mapId,
      styles: [
        { featureType: "water", elementType: "geometry", stylers: [{ color: "#e9e9e9" }] },
        { featureType: "landscape", elementType: "geometry", stylers: [{ color: "#f5f5f5" }] },
        { featureType: "road", elementType: "geometry", stylers: [{ color: "#ffffff" }] },
      ],
    });

    // AdvancedMarkerElement ile marker ekle ve özel logo ikonunu kullan
    const marker = new google.maps.marker.AdvancedMarkerElement({
      position: location,
      map: map,
      title: "My location",
    });

    // Özel logo ikonunu marker'a ekle
    const icon = document.createElement('img');
    icon.src = markerIconUrl;
    icon.style.width = '50px'; // Logo genişliği (isteğe bağlı)
    icon.style.height = '50px'; // Logo yüksekliği (isteğe bağlı)
    marker.content = icon;
  };
</script>

<style>
  .map-container {
    width: 100%;
    height: 400px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
</style>
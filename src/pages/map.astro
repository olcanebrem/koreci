---
const apiKey = import.meta.env.PUBLIC_GOOGLE_MAPS_API_KEY;
if (!apiKey) {
  console.error("Google Maps API anahtarı bulunamadı. Üretim ortamında ortam değişkenini kontrol edin.");
}

const location = { lat: 40.98099136352539, lng: 28.87335968017578 }; // İstanbul koordinatları
const mapId = "my-map-id"; // Google Cloud Console'dan aldığın Map ID
const lottieAnimationData = {
  "nm": "Main Scene",
  "ddd": 0,
  "h": 281,
  "w": 375,
  "meta": { "g": "@lottiefiles/creator 1.44.0" },
  "layers": [
        {
            "ty": 4,
            "nm": "White Outlines",
            "sr": 1,
            "st": 0,
            "op": 84,
            "ip": 0,
            "hd": false,
            "ddd": 0,
            "bm": 0,
            "hasMask": false,
            "ao": 0,
            "ks": {
                "a": {
                    "a": 0,
                    "k": [
                        43,
                        43,
                        0
                    ]
                },
                "s": {
                    "a": 1,
                    "k": [
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                80.531,
                                80.531,
                                100
                            ],
                            "t": 1
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                100,
                                100,
                                100
                            ],
                            "t": 3
                        },
                        {
                            "o": {
                                "x": 0.167,
                                "y": 0.167
                            },
                            "i": {
                                "x": 0.833,
                                "y": 0.833
                            },
                            "s": [
                                110,
                                110,
                                100
                            ],
                            "t": 5
                        },
                        {
                            "o": {
                                "x": 0.167,
                                "y": 0.167
                            },
                            "i": {
                                "x": 0.833,
                                "y": 0.833
                            },
                            "s": [
                                110,
                                110,
                                100
                            ],
                            "t": 12
                        },
                        {
                            "o": {
                                "x": 0.167,
                                "y": 0.167
                            },
                            "i": {
                                "x": 0.833,
                                "y": 0.833
                            },
                            "s": [
                                110,
                                110,
                                100
                            ],
                            "t": 56
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                110,
                                110,
                                100
                            ],
                            "t": 58.714
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                100,
                                100,
                                100
                            ],
                            "t": 62.429
                        },
                        {
                            "s": [
                                80.531,
                                80.531,
                                100
                            ],
                            "t": 66.142578125
                        }
                    ]
                },
                "sk": {
                    "a": 0,
                    "k": 0
                },
                "p": {
                    "a": 1,
                    "k": [
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                187,
                                181,
                                0
                            ],
                            "t": 1
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                187,
                                85.125,
                                0
                            ],
                            "t": 4
                        },
                        {
                            "o": {
                                "x": 0.167,
                                "y": 0.167
                            },
                            "i": {
                                "x": 0.833,
                                "y": 0.833
                            },
                            "s": [
                                187,
                                90.125,
                                0
                            ],
                            "t": 5
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                187,
                                90.125,
                                0
                            ],
                            "t": 58.714
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                187,
                                85.125,
                                0
                            ],
                            "t": 60.571
                        },
                        {
                            "s": [
                                187,
                                181,
                                0
                            ],
                            "t": 66.142578125
                        }
                    ]
                },
                "r": {
                    "a": 0,
                    "k": 0
                },
                "sa": {
                    "a": 0,
                    "k": 0
                },
                "o": {
                    "a": 0,
                    "k": 100
                }
            },
            "shapes": [
                {
                    "ty": "sh",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Shape - Group",
                    "nm": "Path 1",
                    "ix": 1,
                    "d": 1,
                    "ks": {
                        "a": 0,
                        "k": {
                            "c": true,
                            "i": [
                                [
                                    0,
                                    -23.748
                                ],
                                [
                                    23.748,
                                    0
                                ],
                                [
                                    0,
                                    23.748
                                ],
                                [
                                    -23.748,
                                    0
                                ]
                            ],
                            "o": [
                                [
                                    0,
                                    23.748
                                ],
                                [
                                    -23.748,
                                    0
                                ],
                                [
                                    0,
                                    -23.748
                                ],
                                [
                                    23.748,
                                    0
                                ]
                            ],
                            "v": [
                                [
                                    86,
                                    43
                                ],
                                [
                                    43,
                                    86
                                ],
                                [
                                    0,
                                    43
                                ],
                                [
                                    43,
                                    0
                                ]
                            ]
                        }
                    }
                },
                {
                    "ty": "fl",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Graphic - Fill",
                    "nm": "Fill 1",
                    "c": {
                        "a": 0,
                        "k": [
                            1,
                            1,
                            1
                        ]
                    },
                    "r": 1,
                    "o": {
                        "a": 0,
                        "k": 100
                    }
                }
            ],
            "ind": 1
        },
        {
            "ty": 4,
            "nm": "Red circle Outlines",
            "sr": 1,
            "st": 0,
            "op": 84,
            "ip": 0,
            "hd": false,
            "ddd": 0,
            "bm": 0,
            "hasMask": false,
            "ao": 0,
            "ks": {
                "a": {
                    "a": 0,
                    "k": [
                        56.5,
                        56.5,
                        0
                    ]
                },
                "s": {
                    "a": 1,
                    "k": [
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                80.531,
                                80.531,
                                100
                            ],
                            "t": 1
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                100,
                                100,
                                100
                            ],
                            "t": 4
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                120,
                                120,
                                100
                            ],
                            "t": 6
                        },
                        {
                            "o": {
                                "x": 0.167,
                                "y": 0.167
                            },
                            "i": {
                                "x": 0.833,
                                "y": 0.833
                            },
                            "s": [
                                110,
                                110,
                                100
                            ],
                            "t": 12
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                110,
                                110,
                                100
                            ],
                            "t": 56
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                100,
                                100,
                                100
                            ],
                            "t": 60.571
                        },
                        {
                            "s": [
                                80.531,
                                80.531,
                                100
                            ],
                            "t": 66.142578125
                        }
                    ]
                },
                "sk": {
                    "a": 0,
                    "k": 0
                },
                "p": {
                    "a": 1,
                    "k": [
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                187,
                                181,
                                0
                            ],
                            "t": 1
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                187,
                                85.125,
                                0
                            ],
                            "t": 4
                        },
                        {
                            "o": {
                                "x": 0.167,
                                "y": 0.167
                            },
                            "i": {
                                "x": 0.833,
                                "y": 0.833
                            },
                            "s": [
                                187,
                                90.125,
                                0
                            ],
                            "t": 5
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                187,
                                90.125,
                                0
                            ],
                            "t": 58.714
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.667,
                                "y": 1
                            },
                            "s": [
                                187,
                                85.125,
                                0
                            ],
                            "t": 60.571
                        },
                        {
                            "s": [
                                187,
                                181,
                                0
                            ],
                            "t": 66.142578125
                        }
                    ]
                },
                "r": {
                    "a": 0,
                    "k": 0
                },
                "sa": {
                    "a": 0,
                    "k": 0
                },
                "o": {
                    "a": 0,
                    "k": 100
                }
            },
            "shapes": [
                {
                    "ty": "sh",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Shape - Group",
                    "nm": "Path 1",
                    "ix": 1,
                    "d": 1,
                    "ks": {
                        "a": 0,
                        "k": {
                            "c": true,
                            "i": [
                                [
                                    0,
                                    -30.928
                                ],
                                [
                                    30.928,
                                    0
                                ],
                                [
                                    0,
                                    30.928
                                ],
                                [
                                    -30.928,
                                    0
                                ]
                            ],
                            "o": [
                                [
                                    0,
                                    30.928
                                ],
                                [
                                    -30.928,
                                    0
                                ],
                                [
                                    0,
                                    -30.928
                                ],
                                [
                                    30.928,
                                    0
                                ]
                            ],
                            "v": [
                                [
                                    112.25,
                                    56.25
                                ],
                                [
                                    56.25,
                                    112.25
                                ],
                                [
                                    0.25,
                                    56.25
                                ],
                                [
                                    56.25,
                                    0.25
                                ]
                            ]
                        }
                    }
                },
                {
                    "ty": "mm",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Filter - Merge",
                    "nm": "Merge Paths 1",
                    "mm": 4
                },
                {
                    "ty": "fl",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Graphic - Fill",
                    "nm": "Fill 1",
                    "c": {
                        "a": 0,
                        "k": [
                            0.3333,
                            0.6863,
                            0.9059
                        ]
                    },
                    "r": 1,
                    "o": {
                        "a": 0,
                        "k": 100
                    }
                }
            ],
            "ind": 2
        },
        {
            "ty": 4,
            "nm": "Shape Layer 1",
            "sr": 1,
            "st": 0,
            "op": 84,
            "ip": 0,
            "hd": false,
            "ddd": 0,
            "bm": 0,
            "hasMask": false,
            "ao": 0,
            "ks": {
                "a": {
                    "a": 0,
                    "k": [
                        0,
                        0,
                        0
                    ]
                },
                "s": {
                    "a": 0,
                    "k": [
                        100,
                        100,
                        100
                    ]
                },
                "sk": {
                    "a": 0,
                    "k": 0
                },
                "p": {
                    "a": 1,
                    "k": [
                        {
                            "o": {
                                "x": 0.286,
                                "y": 0
                            },
                            "i": {
                                "x": 0.637,
                                "y": 0.846
                            },
                            "s": [
                                187,
                                224.5,
                                0
                            ],
                            "t": 1
                        },
                        {
                            "o": {
                                "x": 0.4,
                                "y": 0.583
                            },
                            "i": {
                                "x": 0.833,
                                "y": 0.833
                            },
                            "s": [
                                187,
                                233.585,
                                0
                            ],
                            "t": 4
                        },
                        {
                            "o": {
                                "x": 0.333,
                                "y": 0
                            },
                            "i": {
                                "x": 0.833,
                                "y": 0.833
                            },
                            "s": [
                                187,
                                232.5,
                                0
                            ],
                            "t": 7
                        },
                        {
                            "o": {
                                "x": 0.167,
                                "y": 0.167
                            },
                            "i": {
                                "x": 0.6,
                                "y": 0.417
                            },
                            "s": [
                                187,
                                232.5,
                                0
                            ],
                            "t": 60
                        },
                        {
                            "o": {
                                "x": 0.363,
                                "y": 0.154
                            },
                            "i": {
                                "x": 0.714,
                                "y": 1
                            },
                            "s": [
                                187,
                                233.585,
                                0
                            ],
                            "t": 63.071
                        },
                        {
                            "s": [
                                187,
                                224.5,
                                0
                            ],
                            "t": 66.142578125
                        }
                    ]
                },
                "r": {
                    "a": 0,
                    "k": 0
                },
                "sa": {
                    "a": 0,
                    "k": 0
                },
                "o": {
                    "a": 0,
                    "k": 100
                }
            },
            "shapes": [
                {
                    "ty": "gr",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Group",
                    "nm": "Shape 1",
                    "ix": 1,
                    "cix": 2,
                    "np": 3,
                    "it": [
                        {
                            "ty": "sh",
                            "bm": 0,
                            "hd": false,
                            "mn": "ADBE Vector Shape - Group",
                            "nm": "Path 1",
                            "ix": 1,
                            "d": 1,
                            "ks": {
                                "a": 1,
                                "k": [
                                    {
                                        "o": {
                                            "x": 0.333,
                                            "y": 0
                                        },
                                        "i": {
                                            "x": 0.833,
                                            "y": 0.833
                                        },
                                        "s": [
                                            {
                                                "c": true,
                                                "i": [
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ]
                                                ],
                                                "o": [
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ]
                                                ],
                                                "v": [
                                                    [
                                                        11.314,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        11.314
                                                    ],
                                                    [
                                                        -11.314,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        -11.314
                                                    ]
                                                ]
                                            }
                                        ],
                                        "t": 1
                                    },
                                    {
                                        "o": {
                                            "x": 0.167,
                                            "y": 0.167
                                        },
                                        "i": {
                                            "x": 0.833,
                                            "y": 0.833
                                        },
                                        "s": [
                                            {
                                                "c": true,
                                                "i": [
                                                    [
                                                        0,
                                                        -1.257
                                                    ],
                                                    [
                                                        1.257,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        1.257
                                                    ],
                                                    [
                                                        -1.257,
                                                        0
                                                    ]
                                                ],
                                                "o": [
                                                    [
                                                        0,
                                                        1.257
                                                    ],
                                                    [
                                                        -1.257,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        -1.257
                                                    ],
                                                    [
                                                        1.257,
                                                        0
                                                    ]
                                                ],
                                                "v": [
                                                    [
                                                        7.152,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        7.152
                                                    ],
                                                    [
                                                        -7.152,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        -7.152
                                                    ]
                                                ]
                                            }
                                        ],
                                        "t": 2
                                    },
                                    {
                                        "o": {
                                            "x": 0.167,
                                            "y": 0
                                        },
                                        "i": {
                                            "x": 0.833,
                                            "y": 0.833
                                        },
                                        "s": [
                                            {
                                                "c": true,
                                                "i": [
                                                    [
                                                        0,
                                                        -2.209
                                                    ],
                                                    [
                                                        2.209,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        2.209
                                                    ],
                                                    [
                                                        -2.209,
                                                        0
                                                    ]
                                                ],
                                                "o": [
                                                    [
                                                        0,
                                                        2.209
                                                    ],
                                                    [
                                                        -2.209,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        -2.209
                                                    ],
                                                    [
                                                        2.209,
                                                        0
                                                    ]
                                                ],
                                                "v": [
                                                    [
                                                        4,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        4
                                                    ],
                                                    [
                                                        -4,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        -4
                                                    ]
                                                ]
                                            }
                                        ],
                                        "t": 4
                                    },
                                    {
                                        "o": {
                                            "x": 0.167,
                                            "y": 0.167
                                        },
                                        "i": {
                                            "x": 0.833,
                                            "y": 0.837
                                        },
                                        "s": [
                                            {
                                                "c": true,
                                                "i": [
                                                    [
                                                        0,
                                                        -2.209
                                                    ],
                                                    [
                                                        2.209,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        2.209
                                                    ],
                                                    [
                                                        -2.209,
                                                        0
                                                    ]
                                                ],
                                                "o": [
                                                    [
                                                        0,
                                                        2.209
                                                    ],
                                                    [
                                                        -2.209,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        -2.209
                                                    ],
                                                    [
                                                        2.209,
                                                        0
                                                    ]
                                                ],
                                                "v": [
                                                    [
                                                        4,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        4
                                                    ],
                                                    [
                                                        -4,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        -4
                                                    ]
                                                ]
                                            }
                                        ],
                                        "t": 63.071
                                    },
                                    {
                                        "o": {
                                            "x": 0.167,
                                            "y": 0.163
                                        },
                                        "i": {
                                            "x": 0.667,
                                            "y": 1
                                        },
                                        "s": [
                                            {
                                                "c": true,
                                                "i": [
                                                    [
                                                        0,
                                                        -1.257
                                                    ],
                                                    [
                                                        1.257,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        1.257
                                                    ],
                                                    [
                                                        -1.257,
                                                        0
                                                    ]
                                                ],
                                                "o": [
                                                    [
                                                        0,
                                                        1.257
                                                    ],
                                                    [
                                                        -1.257,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        -1.257
                                                    ],
                                                    [
                                                        1.257,
                                                        0
                                                    ]
                                                ],
                                                "v": [
                                                    [
                                                        7.152,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        7.152
                                                    ],
                                                    [
                                                        -7.152,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        -7.152
                                                    ]
                                                ]
                                            }
                                        ],
                                        "t": 65.119
                                    },
                                    {
                                        "s": [
                                            {
                                                "c": true,
                                                "i": [
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ]
                                                ],
                                                "o": [
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        0
                                                    ]
                                                ],
                                                "v": [
                                                    [
                                                        11.314,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        11.314
                                                    ],
                                                    [
                                                        -11.314,
                                                        0
                                                    ],
                                                    [
                                                        0,
                                                        -11.314
                                                    ]
                                                ]
                                            }
                                        ],
                                        "t": 66.142578125
                                    }
                                ]
                            }
                        },
                        {
                            "ty": "fl",
                            "bm": 0,
                            "hd": false,
                            "mn": "ADBE Vector Graphic - Fill",
                            "nm": "Fill 1",
                            "c": {
                                "a": 0,
                                "k": [
                                    1,
                                    0.4431,
                                    0
                                ]
                            },
                            "r": 1,
                            "o": {
                                "a": 0,
                                "k": 100
                            }
                        },
                        {
                            "ty": "tr",
                            "a": {
                                "a": 0,
                                "k": [
                                    0,
                                    0
                                ],
                                "ix": 1
                            },
                            "s": {
                                "a": 0,
                                "k": [
                                    100,
                                    100
                                ],
                                "ix": 3
                            },
                            "sk": {
                                "a": 0,
                                "k": 0,
                                "ix": 4
                            },
                            "p": {
                                "a": 0,
                                "k": [
                                    0,
                                    0
                                ],
                                "ix": 2
                            },
                            "r": {
                                "a": 0,
                                "k": 0,
                                "ix": 6
                            },
                            "sa": {
                                "a": 0,
                                "k": 0,
                                "ix": 5
                            },
                            "o": {
                                "a": 0,
                                "k": 100,
                                "ix": 7
                            }
                        }
                    ]
                }
            ],
            "ind": 3
        },
        {
            "ty": 4,
            "nm": "Layer 4/location_marker_animation Outlines",
            "sr": 1,
            "st": -16,
            "op": 67,
            "ip": 1,
            "hd": false,
            "ddd": 0,
            "bm": 0,
            "hasMask": false,
            "ao": 0,
            "ks": {
                "a": {
                    "a": 0,
                    "k": [
                        2,
                        38.5
                    ]
                },
                "s": {
                    "a": 0,
                    "k": [
                        100,
                        100,
                        100
                    ]
                },
                "sk": {
                    "a": 0,
                    "k": 0
                },
                "p": {
                    "a": 0,
                    "k": [
                        187,
                        188
                    ]
                },
                "r": {
                    "a": 0,
                    "k": 0
                },
                "sa": {
                    "a": 0,
                    "k": 0
                },
                "o": {
                    "a": 0,
                    "k": 100
                }
            },
            "shapes": [
                {
                    "ty": "gr",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Group",
                    "nm": "Group 1",
                    "ix": 1,
                    "cix": 2,
                    "np": 2,
                    "it": [
                        {
                            "ty": "sh",
                            "bm": 0,
                            "hd": false,
                            "mn": "ADBE Vector Shape - Group",
                            "nm": "Path 1",
                            "ix": 1,
                            "d": 1,
                            "ks": {
                                "a": 0,
                                "k": {
                                    "c": false,
                                    "i": [
                                        [
                                            0,
                                            0
                                        ],
                                        [
                                            0,
                                            0
                                        ]
                                    ],
                                    "o": [
                                        [
                                            0,
                                            0
                                        ],
                                        [
                                            0,
                                            0
                                        ]
                                    ],
                                    "v": [
                                        [
                                            2,
                                            73
                                        ],
                                        [
                                            2,
                                            74
                                        ]
                                    ]
                                }
                            }
                        },
                        {
                            "ty": "st",
                            "bm": 0,
                            "hd": false,
                            "mn": "ADBE Vector Graphic - Stroke",
                            "nm": "Stroke 1",
                            "lc": 2,
                            "lj": 1,
                            "ml": 10,
                            "o": {
                                "a": 0,
                                "k": 100
                            },
                            "w": {
                                "a": 0,
                                "k": 4
                            },
                            "c": {
                                "a": 0,
                                "k": [
                                    0.2471,
                                    0.6118,
                                    1
                                ]
                            }
                        },
                        {
                            "ty": "tr",
                            "a": {
                                "a": 0,
                                "k": [
                                    0,
                                    0
                                ],
                                "ix": 1
                            },
                            "s": {
                                "a": 0,
                                "k": [
                                    100,
                                    100
                                ],
                                "ix": 3
                            },
                            "sk": {
                                "a": 0,
                                "k": 0,
                                "ix": 4
                            },
                            "p": {
                                "a": 0,
                                "k": [
                                    0,
                                    0
                                ],
                                "ix": 2
                            },
                            "r": {
                                "a": 0,
                                "k": 0,
                                "ix": 6
                            },
                            "sa": {
                                "a": 0,
                                "k": 0,
                                "ix": 5
                            },
                            "o": {
                                "a": 0,
                                "k": 100,
                                "ix": 7
                            }
                        }
                    ]
                },
                {
                    "ty": "gr",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Group",
                    "nm": "Group 2",
                    "ix": 2,
                    "cix": 2,
                    "np": 2,
                    "it": [
                        {
                            "ty": "sh",
                            "bm": 0,
                            "hd": false,
                            "mn": "ADBE Vector Shape - Group",
                            "nm": "Path 1",
                            "ix": 1,
                            "d": 1,
                            "ks": {
                                "a": 0,
                                "k": {
                                    "c": false,
                                    "i": [
                                        [
                                            0,
                                            0
                                        ],
                                        [
                                            0,
                                            0
                                        ]
                                    ],
                                    "o": [
                                        [
                                            0,
                                            0
                                        ],
                                        [
                                            0,
                                            0
                                        ]
                                    ],
                                    "v": [
                                        [
                                            2,
                                            9
                                        ],
                                        [
                                            2,
                                            70
                                        ]
                                    ]
                                }
                            }
                        },
                        {
                            "ty": "st",
                            "bm": 0,
                            "hd": false,
                            "mn": "ADBE Vector Graphic - Stroke",
                            "nm": "Stroke 1",
                            "lc": 2,
                            "lj": 1,
                            "ml": 10,
                            "o": {
                                "a": 0,
                                "k": 100
                            },
                            "w": {
                                "a": 0,
                                "k": 4
                            },
                            "d": [
                                {
                                    "nm": "dash",
                                    "n": "d",
                                    "v": {
                                        "a": 0,
                                        "k": 2
                                    }
                                },
                                {
                                    "nm": "gap",
                                    "n": "g",
                                    "v": {
                                        "a": 0,
                                        "k": 6
                                    }
                                },
                                {
                                    "nm": "offset",
                                    "n": "o",
                                    "v": {
                                        "a": 0,
                                        "k": 0
                                    }
                                }
                            ],
                            "c": {
                                "a": 0,
                                "k": [
                                    0.2471,
                                    0.6118,
                                    1
                                ]
                            }
                        },
                        {
                            "ty": "tr",
                            "a": {
                                "a": 0,
                                "k": [
                                    0,
                                    0
                                ],
                                "ix": 1
                            },
                            "s": {
                                "a": 0,
                                "k": [
                                    100,
                                    100
                                ],
                                "ix": 3
                            },
                            "sk": {
                                "a": 0,
                                "k": 0,
                                "ix": 4
                            },
                            "p": {
                                "a": 0,
                                "k": [
                                    0,
                                    0
                                ],
                                "ix": 2
                            },
                            "r": {
                                "a": 0,
                                "k": 0,
                                "ix": 6
                            },
                            "sa": {
                                "a": 0,
                                "k": 0,
                                "ix": 5
                            },
                            "o": {
                                "a": 0,
                                "k": 100,
                                "ix": 7
                            }
                        }
                    ]
                },
                {
                    "ty": "gr",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Group",
                    "nm": "Group 3",
                    "ix": 3,
                    "cix": 2,
                    "np": 2,
                    "it": [
                        {
                            "ty": "sh",
                            "bm": 0,
                            "hd": false,
                            "mn": "ADBE Vector Shape - Group",
                            "nm": "Path 1",
                            "ix": 1,
                            "d": 1,
                            "ks": {
                                "a": 0,
                                "k": {
                                    "c": false,
                                    "i": [
                                        [
                                            0,
                                            0
                                        ],
                                        [
                                            0,
                                            0
                                        ]
                                    ],
                                    "o": [
                                        [
                                            0,
                                            0
                                        ],
                                        [
                                            0,
                                            0
                                        ]
                                    ],
                                    "v": [
                                        [
                                            2,
                                            2
                                        ],
                                        [
                                            2,
                                            3
                                        ]
                                    ]
                                }
                            }
                        },
                        {
                            "ty": "st",
                            "bm": 0,
                            "hd": false,
                            "mn": "ADBE Vector Graphic - Stroke",
                            "nm": "Stroke 1",
                            "lc": 2,
                            "lj": 1,
                            "ml": 10,
                            "o": {
                                "a": 0,
                                "k": 100
                            },
                            "w": {
                                "a": 0,
                                "k": 4
                            },
                            "c": {
                                "a": 0,
                                "k": [
                                    0.2471,
                                    0.6118,
                                    1
                                ]
                            }
                        },
                        {
                            "ty": "tr",
                            "a": {
                                "a": 0,
                                "k": [
                                    0,
                                    0
                                ],
                                "ix": 1
                            },
                            "s": {
                                "a": 0,
                                "k": [
                                    100,
                                    100
                                ],
                                "ix": 3
                            },
                            "sk": {
                                "a": 0,
                                "k": 0,
                                "ix": 4
                            },
                            "p": {
                                "a": 0,
                                "k": [
                                    0,
                                    0
                                ],
                                "ix": 2
                            },
                            "r": {
                                "a": 0,
                                "k": 0,
                                "ix": 6
                            },
                            "sa": {
                                "a": 0,
                                "k": 0,
                                "ix": 5
                            },
                            "o": {
                                "a": 0,
                                "k": 100,
                                "ix": 7
                            }
                        }
                    ]
                }
            ],
            "ind": 4
        },
        {
            "ty": 4,
            "nm": "shadow Outlines",
            "sr": 1,
            "st": 0,
            "op": 84,
            "ip": 0,
            "hd": false,
            "ddd": 0,
            "bm": 0,
            "hasMask": false,
            "ao": 0,
            "ks": {
                "a": {
                    "a": 0,
                    "k": [
                        26,
                        10.718000411987305
                    ]
                },
                "s": {
                    "a": 0,
                    "k": [
                        100,
                        100,
                        100
                    ]
                },
                "sk": {
                    "a": 0,
                    "k": 0
                },
                "p": {
                    "a": 0,
                    "k": [
                        187,
                        232.7180004119873
                    ]
                },
                "r": {
                    "a": 0,
                    "k": 0
                },
                "sa": {
                    "a": 0,
                    "k": 0
                },
                "o": {
                    "a": 0,
                    "k": 20
                }
            },
            "shapes": [
                {
                    "ty": "sh",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Shape - Group",
                    "nm": "Path 1",
                    "ix": 1,
                    "d": 1,
                    "ks": {
                        "a": 0,
                        "k": {
                            "c": true,
                            "i": [
                                [
                                    0,
                                    -5.919
                                ],
                                [
                                    14.359,
                                    0
                                ],
                                [
                                    0,
                                    5.919
                                ],
                                [
                                    -14.359,
                                    0
                                ]
                            ],
                            "o": [
                                [
                                    0,
                                    5.919
                                ],
                                [
                                    -14.359,
                                    0
                                ],
                                [
                                    0,
                                    -5.919
                                ],
                                [
                                    14.359,
                                    0
                                ]
                            ],
                            "v": [
                                [
                                    52,
                                    10.718
                                ],
                                [
                                    26,
                                    21.436
                                ],
                                [
                                    0,
                                    10.718
                                ],
                                [
                                    26,
                                    0
                                ]
                            ]
                        }
                    }
                },
                {
                    "ty": "fl",
                    "bm": 0,
                    "hd": false,
                    "mn": "ADBE Vector Graphic - Fill",
                    "nm": "Fill 1",
                    "c": {
                        "a": 0,
                        "k": [
                            0.7686,
                            0.7686,
                            0.7686
                        ]
                    },
                    "r": 1,
                    "o": {
                        "a": 0,
                        "k": 100
                    }
                }
            ],
            "ind": 5
        }
    ],
  "v": "5.7.0",
  "fr": 28,
  "op": 82,
  "ip": 0,
  "assets": []
};
---

<div id="map" class="map-container"></div>

<script define:vars={{ apiKey, location, mapId, lottieAnimationData }}>
  // Lottie scriptini yükle
  const lottieScript = document.createElement('script');
  lottieScript.src = '/js/lottie.min.js';
  lottieScript.async = true;
  lottieScript.onload = () => {
    console.log('Lottie yüklendi');
    loadGoogleMaps();
  };
  lottieScript.onerror = () => console.error('Lottie yüklenemedi');
  document.head.appendChild(lottieScript);

  // Google Maps scriptini yükle
  function loadGoogleMaps() {
    const googleScript = document.createElement('script');
    googleScript.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap&libraries=maps,marker&v=beta`;
    googleScript.async = true;
    googleScript.onload = () => console.log('Google Maps yüklendi');
    googleScript.onerror = () => console.error('Google Maps yüklenemedi');
    document.head.appendChild(googleScript);
  }

  // initMap fonksiyonunu tanımla
  window.initMap = function () {
    const map = new google.maps.Map(document.getElementById('map'), {
      center: location,
      zoom: 14,
      mapId: mapId,
      styles: [
        { featureType: "water", elementType: "geometry", stylers: [{ color: "#e9e9e9" }] },
        { featureType: "landscape", elementType: "geometry", stylers: [{ color: "#f5f5f5" }] },
        { featureType: "road", elementType: "geometry", stylers: [{ color: "#ffffff" }] },
      ],
    });

    // Marker için animasyon kapsayıcısını oluştur
    const markerContainer = document.createElement('div');
    markerContainer.style.width = '60px';
    markerContainer.style.height = '80px';
    markerContainer.style.position = 'relative';

    // Lottie animasyonunu render et
    if (typeof lottie !== 'undefined') {
      const animation = lottie.loadAnimation({
        container: markerContainer,
        renderer: 'svg',
        loop: true,
        autoplay: true,
        animationData: lottieAnimationData,
      });

      // Animasyon boyutunu ayarla
      animation.addEventListener('DOMLoaded', () => {
        const svgElement = markerContainer.querySelector('svg');
        if (svgElement) {
          svgElement.style.width = '60px';
          svgElement.style.height = '80px';
          console.log('Animasyon yüklendi');
        }
      });
    } else {
      console.error('Lottie tanımlı değil');
    }

    // AdvancedMarkerElement ile marker ekle
    const marker = new google.maps.marker.AdvancedMarkerElement({
      position: location,
      map: map,
      title: "My location",
      content: markerContainer,
    });

    console.log('Marker oluşturuldu:', marker);
  };
</script>

<style>
  .map-container {
    width: 100%;
    height: 400px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
</style>
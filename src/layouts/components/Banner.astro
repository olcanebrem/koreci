---
import { markdownify } from "@/lib/utils/textConverter";
import { Image } from "astro:assets";
const { banner } = Astro.props;
const { title, button, image, content } = banner;
---

<section class="section banner relative ">
  <!-- Marquee Kapsayıcı -->
  <!-- İlk Marquee (Üstteki "Spots Open" Yazısı) -->
  <div class="relative mx-auto overflow-hidden py-2 max-w">
    <!-- Gradient Overlay’ler -->
   <!-- Marquee Yazı -->
    <div id="marquee-content" class="text-red-400 flex items-center animate-marquee font-black font-display gap-4 tracking-widest uppercase whitespace-nowrap">  <!-- İçerik buraya dinamik olarak eklenecek -->
    </div>
  </div>

  <div class="container">
    <!-- İkinci Marquee (Dört Tabloyu Kaydırma) -->
    <div class="relative mx-auto overflow-hidden py-12 max-w-7xl h-full">
      <div class="flex animate-marquee gap-6">
        <!-- Tablo 1 -->
        <div class="min-w-[300px] flex flex-col justify-between h-full text-white text-sm p-6 bg-gray-900 rounded-lg">
          <div class="w-full flex justify-center">
            <img 
            class="w-3/4 max-w-[256px]"src="https://res.cloudinary.com/dbfehj6jo/image/upload/w_128,q_auto,f_auto/v1743330499/yeditepe_logo">
          </div>
          <p class="text-[#7783ef] text-sm">
            Mark has an exceptional eye for design, and collaborating with him has
            been an absolute delight. I am looking forward to partnering with him on
            upcoming projects. I wholeheartedly endorse him to anyone in search of
            exceptional, top-notch work.
          </p>
          <div class="mt-6">
            <span class="block font-semibold text-2xl pb-2">Lindsay Chen</span>
            <span class="block text-gray-400">Founder of CodeCraft Studios</span>
          </div>
        </div>

        <!-- Tablo 2 -->
        <div class="min-w-[300px] flex flex-col justify-between h-full text-white text-sm p-6 bg-gray-900 rounded-lg">
          <div class="w-full flex justify-center">
            <img 
            class="w-2/4 max-w-[256px]"src="https://res.cloudinary.com/dbfehj6jo/image/upload/w_128,q_auto,f_auto/v1743330500/msgs%C3%BC_logo.png">
          </div>
          <p class="text-[#7783ef] text-sm">
            Mark has an exceptional eye for design, and collaborating with him has
            been an absolute delight. I am looking forward to partnering with him on
            upcoming projects. I wholeheartedly endorse him to anyone in search of
            exceptional, top-notch work.
          </p>
          <div class="mt-6">
            <span class="block font-semibold text-2xl pb-2">Lindsay Chen</span>
            <span class="block text-gray-400">Founder of CodeCraft Studios</span>
          </div>
        </div>

        <!-- Tablo 3 -->
        <div class="min-w-[300px] flex flex-col justify-between h-full text-white text-sm p-6 bg-gray-900 rounded-lg">
          <div class="w-full flex justify-center">
            <img 
            class="w-2/4 max-w-[256px]"src="https://res.cloudinary.com/dbfehj6jo/image/upload/w_128,q_auto,f_auto/v1743330499/kocaeli_logo">
          </div>
          <p class="text-[#7783ef] text-sm">
            Mark has an exceptional eye for design, and collaborating with him has
            been an absolute delight. I am looking forward to partnering with him on
            upcoming projects. I wholeheartedly endorse him to anyone in search of
            exceptional, top-notch work.
          </p>
          <div class="mt-6">
            <span class="block font-semibold text-2xl pb-2">Lindsay Chen</span>
            <span class="block text-gray-400">Founder of CodeCraft Studios</span>
          </div>
        </div>

        <!-- Tablo 4 -->
        <div class="min-w-[300px] flex flex-col justify-between h-full text-white text-sm p-6 bg-gray-900 rounded-lg">
          <div class="w-full flex justify-center">
            <img 
            class="w-2/4 max-w-[256px]"src="https://res.cloudinary.com/dbfehj6jo/image/upload/w_128,q_auto,f_auto/v1743330499/marmara_logo">
          </div>
          <p class="text-[#7783ef] text-sm">
            Mark has an exceptional eye for design, and collaborating with him has
            been an absolute delight. I am looking forward to partnering with him on
            upcoming projects. I wholeheartedly endorse him to anyone in search of
            exceptional, top-notch work.
          </p>
          <div class="mt-6">
            <span class="block font-semibold text-2xl pb-2">Lindsay Chen</span>
            <span class="block text-gray-400">Founder of CodeCraft Studios</span>
          </div>
        </div>

        <!-- Tekrarlayan Tablolar (Sürekli Kaydırma İçin) -->
        <div class="min-w-[300px] flex flex-col justify-between h-full text-white text-sm p-6 bg-gray-900 rounded-lg">
          <div class="w-full flex justify-center">
            <img 
            class="w-2/4 max-w-[256px]"src="https://res.cloudinary.com/dbfehj6jo/image/upload/w_128,q_auto,f_auto/v1743330499/aydın_logo">
          </div>
          <p class="text-[#7783ef] text-sm">
            Mark has an exceptional eye for design, and collaborating with him has
            been an absolute delight. I am looking forward to partnering with him on
            upcoming projects. I wholeheartedly endorse him to anyone in search of
            exceptional, top-notch work.
          </p>
          <div class="mt-6">
            <span class="block font-semibold text-2xl pb-2">Lindsay Chen</span>
            <span class="block text-gray-400">Founder of CodeCraft Studios</span>
          </div>
        </div>

        <div class="min-w-[300px] flex flex-col justify-between h-full text-white text-sm p-6 bg-gray-900 rounded-lg">
          <div class="w-full flex justify-center">
            <img 
            class="w-2/4 max-w-[256px]"src="https://res.cloudinary.com/dbfehj6jo/image/upload/w_128,q_auto,f_auto/v1743330499/anadolu_logo">
          </div>
          <p class="text-[#7783ef] text-sm">
            Mark has an exceptional eye for design, and collaborating with him has
            been an absolute delight. I am looking forward to partnering with him on
            upcoming projects. I wholeheartedly endorse him to anyone in search of
            exceptional, top-notch work.
          </p>
          <div class="mt-6">
            <span class="block font-semibold text-2xl pb-2">Lindsay Chen</span>
            <span class="block text-gray-400">Founder of CodeCraft Studios</span>
          </div>
        </div>

        <div class="min-w-[300px] flex flex-col justify-between h-full text-white text-sm p-6 bg-gray-900 rounded-lg">
          <div class="w-full flex justify-center">
            <img 
            class="w-2/4 max-w-[256px]"src="https://res.cloudinary.com/dbfehj6jo/image/upload/w_128,q_auto,f_auto/v1743330499/comu_logo">
          </div>
          <p class="text-[#7783ef] text-sm">
            Mark has an exceptional eye for design, and collaborating with him has
            been an absolute delight. I am looking forward to partnering with him on
            upcoming projects. I wholeheartedly endorse him to anyone in search of
            exceptional, top-notch work.
          </p>
          <div class="mt-6">
            <span class="block font-semibold text-2xl pb-2">Lindsay Chen</span>
            <span class="block text-gray-400">Founder of CodeCraft Studios</span>
          </div>
        </div>
        <div class="min-w-[300px] flex flex-col justify-between h-full text-white text-sm p-6 bg-gray-900 rounded-lg">
          <div class="w-full flex justify-center">
            <img 
            class="w-2/4 max-w-[256px]"src="https://res.cloudinary.com/dbfehj6jo/image/upload/w_128,q_auto,f_auto/v1743330499/kocaeli_logo">
          </div>
          <p class="text-[#7783ef] text-sm">
            Mark has an exceptional eye for design, and collaborating with him has
            been an absolute delight. I am looking forward to partnering with him on
            upcoming projects. I wholeheartedly endorse him to anyone in search of
            exceptional, top-notch work.
          </p>
          <div class="mt-6">
            <span class="block font-semibold text-2xl pb-2">Lindsay Chen</span>
            <span class="block text-gray-400">Founder of CodeCraft Studios</span>
          </div>
        </div>
      </div>
    </div>

   
    
  </div>
</section>

<script>
  function initializeMarquee() {
    const marqueeContent = document.getElementById("marquee-content");
    if (!marqueeContent) {
      console.error('Marquee content element not found.');
      return () => {}; // Temizleme fonksiyonu olarak boş bir fonksiyon döndür
    }

    // Marquee içeriğini oluşturacak fonksiyon
    function populateMarquee() {
      marqueeContent.innerHTML = ""; // Eski içeriği temizle
      const createItem = () => {
        const item = document.createElement("div");
        item.className = "flex items-center gap-4";
        item.innerHTML = `Kayıtlar açık <span class="hidden lg:inline">✺</span>`;
        return item;
      };

      // Ekran genişliğine göre yeterli sayıda birim ekle
      const itemCount = Math.ceil(window.innerWidth / 200) * 2; // Ekranı dolduracak kadar + fazladan
      for (let i = 0; i < itemCount; i++) {
        marqueeContent.appendChild(createItem());
      }
    }

    // İlk yüklemede çalıştır
    populateMarquee();

    // Pencere boyutu değiştiğinde güncelle
    const resizeHandler = () => {
      populateMarquee();
    };
    window.addEventListener("resize", resizeHandler);

    // Temizleme fonksiyonu
    return () => {
      window.removeEventListener("resize", resizeHandler);
    };
  }

  // Sayfanın her yüklenmesinde (View Transitions dahil) çalıştır
  document.addEventListener('astro:page-load', () => {
    const cleanup = initializeMarquee();
    // Sayfadan ayrıldığında temizleme yap
    document.addEventListener('astro:before-preparation', cleanup, { once: true });
  });
</script>